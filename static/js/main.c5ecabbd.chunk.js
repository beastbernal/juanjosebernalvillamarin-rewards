(this["webpackJsonpjuanjosebernalvillamarin-rewards"]=this["webpackJsonpjuanjosebernalvillamarin-rewards"]||[]).push([[0],{52:function(e,t,a){},54:function(e,t,a){e.exports=a.p+"static/media/logo.cf518ba3.png"},66:function(e,t,a){e.exports=a(78)},71:function(e,t,a){},78:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(13),o=a.n(c),i=(a(52),a(71),a(39)),l=a(12),s=a(10),u=a.n(s),p=a(21),d=a(18),m=r.a.createContext(),g="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI1ZjRkMjYyMzc0MjM1MjAwMWVkOTA5OWMiLCJpYXQiOjE1OTg4OTE1NTV9.PQhZhUEYKTvxQnf2eF47t1cHiOaIbbX0_iM7O4N9i0w",f={"Content-Type":"application/json",Authorization:"Bearer "+g},b=new Headers;function h(e){var t=e.children,a=Object(n.useState)(""),c=Object(d.a)(a,2),o=c[0],i=c[1],l=Object(n.useState)(""),s=Object(d.a)(l,2),g=s[0],h=s[1],v=Object(n.useState)(""),E=Object(d.a)(v,2),x=E[0],j=E[1],O=function(){var e=Object(p.a)(u.a.mark((function e(t,a,n){var r,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t,{method:a,body:JSON.stringify(n),headers:b});case 2:return r=e.sent,e.next=5,r.json();case 5:return c=e.sent,e.abrupt("return",c);case 7:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){Object(p.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=i,e.next=3,O("https://coding-challenge-api.aerolab.co/products","GET");case 3:return e.t1=e.sent,(0,e.t0)(e.t1),e.t2=h,e.next=8,O("https://coding-challenge-api.aerolab.co/user/me","GET");case 8:return e.t3=e.sent,(0,e.t2)(e.t3),e.t4=j,e.next=13,O("https://coding-challenge-api.aerolab.co/user/history","GET");case 13:e.t5=e.sent,(0,e.t4)(e.t5);case 15:case"end":return e.stop()}}),e)})))()}),[]);var w=Object(n.useCallback)(Object(p.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Object(p.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=h,e.next=3,O("https://coding-challenge-api.aerolab.co/user/me","GET");case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)})))();case 1:case"end":return e.stop()}}),e)}))),[]),y=Object(n.useCallback)(Object(p.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Object(p.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=j,e.next=3,O("https://coding-challenge-api.aerolab.co/user/history","GET");case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)})))();case 1:case"end":return e.stop()}}),e)}))),[]),C=Object(n.useCallback)(function(){var e=Object(p.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O("https://coding-challenge-api.aerolab.co/user/points","POST",{amount:t});case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[]),k=Object(n.useCallback)(function(){var e=Object(p.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O("https://coding-challenge-api.aerolab.co/redeem","POST",{productId:t});case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[]),T=Object(n.useMemo)((function(){return{products:o,userData:g,recordData:x,setUserData:h,refrehUser:w,headers:f,addPoints:C,redeemProduct:k,updateHistory:y}}),[o,g,x,w,C,k,y]);return r.a.createElement(m.Provider,{value:{providerValue:T}},t)}b.append("Content-Type","application/json"),b.append("X-Custom-Header","ProcessThisImmediately"),b.append("Authorization","Bearer "+g);var v=a(105),E=a(54),x=a.n(E),j=a(113),O=a(55),w=a(125),y=a(127),C=a(122),k=a(108),T=a(109),P=a(110),N=a(111),S=a(112),I=a(114),R=a(115),M=a(116),D=a(117),G=a(50),A=a(118),V=a(123);var B=function(e,t){var a=Object(n.useState)(1),r=Object(d.a)(a,2),c=r[0],o=r[1],i=Math.ceil(e.length/t);return{next:function(){o((function(e){return Math.min(e+1,i)}))},prev:function(){o((function(e){return Math.max(e-1,1)}))},jump:function(e){var t=Math.max(1,e);o((function(e){return Math.min(t,i)}))},currentData:function(){var a=(c-1)*t,n=a+t;return e.slice(a,n)},currentPage:c,maxPage:i}},H=Object(v.a)((function(e){return{root:{flexGrow:1},rootbar:{position:"fixed",width:"100%",zIndex:1e3},rootAlert:{width:"100%","& > * + *":{marginTop:e.spacing(2)}},rootButton:{"& > *":{margin:e.spacing(1)}},menuButton:{marginRight:e.spacing(2)},toolbar:{minHeight:128,alignItems:"flex-start",paddingTop:e.spacing(1),paddingBottom:e.spacing(2),background:"linear-gradient(45deg, #8fb243 30%, #d36c1c 90%)",border:0,borderRadius:3,boxShadow:"0 3px 5px 2px rgba(255, 105, 135, .3)",color:"white",height:48,padding:"0 10px",zIndex:1e3},title:{flexGrow:1,alignSelf:"flex-end"},container:{paddingTop:e.spacing(20)}}})),z=r.a.forwardRef((function(e,t){return r.a.createElement(y.a,Object.assign({direction:"up",ref:t},e))}));var F=function(e){var t=e.isRedeemable,a=e.products,c=e.userData,o=Object(n.useContext)(m).providerValue,i=o.redeemProduct,l=o.updateHistory,s=o.refrehUser,g=H(),f=B(a,16),b=Object(n.useState)(1),h=Object(d.a)(b,2),v=h[0],E=h[1],x=a.length>16?Math.ceil(a.length/16):1,y=Object(n.useState)(!1),F=Object(d.a)(y,2),L=F[0],J=F[1],U=Object(n.useState)(""),W=Object(d.a)(U,2),Q=W[0],X=W[1],Y=Object(n.useState)(""),Z=Object(d.a)(Y,2),_=Z[0],q=Z[1];function K(){return(K=Object(p.a)(u.a.mark((function e(t){var a,n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(O.a)(i(t));case 2:if(a=e.sent,n=Object(d.a)(a,2),r=n[0],n[1]){e.next=13;break}throw X("Error"),q("Producto No Pudo ser Redimido, Por Favor Intenta de Nuevo"),$(),new Error("Error al Redimir el Producto"+r);case 13:return e.next=15,l();case 15:return e.next=17,s();case 17:X("Felicitaciones"),q("Producto Redimido con \xc8xito \ud83d\udc5c"),$();case 20:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var $=function(){J(!0)},ee=function(){J(!1)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(C.a,{open:L,onClose:ee,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",TransitionComponent:z,keepMounted:!0},r.a.createElement(k.a,{id:"alert-dialog-title"},Q),r.a.createElement(T.a,null,r.a.createElement(P.a,{id:"alert-dialog-description"},_)),r.a.createElement(N.a,null,r.a.createElement(S.a,{onClick:ee,variant:"contained",color:"primary",autoFocus:!0},"Aceptar"))),f.currentData()&&v&&f.currentData().map((function(e){return r.a.createElement(r.a.Fragment,{key:Object(w.a)()},r.a.createElement(j.a,{item:!0,xs:3},r.a.createElement(I.a,{className:g.root,variant:"outlined"},r.a.createElement(R.a,null,r.a.createElement(M.a,{key:Object(w.a)(),component:"img",image:e.img.url,title:e.name}),r.a.createElement(D.a,null,r.a.createElement(G.a,{variant:"body2",color:"textSecondary",component:"p"},e.category),r.a.createElement(G.a,{gutterBottom:!0,variant:"h5",component:"h2"},e.name))),t&&r.a.createElement(A.a,null,c.points>e.cost?r.a.createElement(S.a,{variant:"contained",color:"primary","aria-label":"Canjear",onClick:function(){return function(e){return K.apply(this,arguments)}(e._id)}},"Canjear"," ",r.a.createElement("span",{role:"img","aria-labelledby":"coin"},"\ud83d\udc5c")):r.a.createElement(S.a,{variant:"outlined",disabled:!0},"Te faltan ",c.points-e.cost," \ud83d\udcb0")))))})),r.a.createElement("div",{className:"box-center"},r.a.createElement(V.a,{count:x,page:f.currentPage,onChange:function(e,t){E(t),f.jump(t)}})))},L=Object(v.a)((function(e){return{root:{flexGrow:1},container:{paddingTop:e.spacing(20)}}})),J=function(){var e=L(),t=Object(n.useContext)(m),a=t.providerValue.products,c=void 0===a?[]:a,o=t.providerValue.userData,i=void 0===o?{}:o;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:e.container},r.a.createElement("h2",null,"Productos Disponibles Para Canje"),r.a.createElement(j.a,{container:!0,spacing:1},r.a.createElement(j.a,{container:!0,item:!0,xs:12,spacing:4},r.a.createElement(F,{isRedeemable:!0,products:c,userData:i})))))};var U=function(){var e=Object(n.useContext)(m).providerValue.userData,t=void 0===e?[]:e;return r.a.createElement("div",{className:"box-user"},r.a.createElement("strong",null," ",t.name)," :: ",t.points,"\ud83d\udcb0")},W=a(61),Q=a(129),X=a(126),Y=a(124),Z=a(119);function _(e){return r.a.createElement(y.a,Object.assign({},e,{direction:"down"}))}var q=Object(v.a)((function(e){return{root:{flexGrow:1},rootPaper:{display:"flex",flexWrap:"wrap","& > *":{margin:e.spacing(1),width:e.spacing(16),height:e.spacing(16)}},rootAlert:{"& > * + *":{marginTop:e.spacing(2)},marginLeft:e.spacing(20),paddingLeft:e.spacing(5),marginRight:e.spacing(20),paddingRight:e.spacing(5)},title:{flexGrow:1,alignSelf:"flex-end"},container:{paddingTop:e.spacing(20)},paper:{marginTop:e.spacing(10),marginBottom:e.spacing(10),marginLeft:e.spacing(20),paddingLeft:e.spacing(5),marginRight:e.spacing(20),paddingRight:e.spacing(5),backgroundColor:"rgba(143, 178, 67, 0.7)"},close:{padding:e.spacing(.5)}}})),K=[{value:1e3,label:"1000"},{value:5e3,label:"5000"},{value:7500,label:"7500"}];function $(e){return"".concat(e)}var ee=function(){var e=r.a.useState(!1),t=Object(d.a)(e,2),a=t[0],c=t[1],o=r.a.useState(""),i=Object(d.a)(o,2),l=i[0],s=i[1],g=r.a.useState(1e3),f=Object(d.a)(g,2),b=f[0],h=f[1],v=Object(n.useContext)(m).providerValue,E=v.addPoints,x=v.refrehUser,j=q(),O=function(){var e=Object(p.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E(b);case 3:return t=e.sent,console.log(t),s(t.message+", Nuevo Puntaje: "+t["New Points"]),c(!0),e.next=9,x();case 9:e.next=13;break;case 11:e.prev=11,e.t0=e.catch(0);case 13:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),w=function(){c(!1)};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:j.container},r.a.createElement("h2",null,"Agregar M\xe1s Puntos"),r.a.createElement("div",{className:j.root},r.a.createElement(Y.a,{severity:"info",className:j.rootAlert},r.a.createElement(Z.a,null,"Recuerda: "),"Recuerda que solo puedes agregar 1000, 5000 o 7500 puntos :: Vas a agregar: ",r.a.createElement("strong",null,b," ")),r.a.createElement(W.a,{elevation:3,className:j.paper},r.a.createElement(Q.a,{defaultValue:1e3,onChange:function(e,t){h(t)},getAriaValueText:$,"aria-labelledby":"discrete-slider-restrict",step:null,valueLabelDisplay:"on",marks:K,min:0,max:7500})),r.a.createElement(S.a,{variant:"contained",color:"primary",onClick:function(){return O()}},"Agregar: ",r.a.createElement("strong",null," ",b," ")," \ud83d\udcb0"),r.a.createElement(X.a,{open:a,onClose:w,TransitionComponent:_,message:l,action:r.a.createElement(r.a.Fragment,null,r.a.createElement(S.a,{color:"secondary",size:"small",onClick:w},"Cerrar"))}))))},te=Object(v.a)((function(e){return{root:{flexGrow:1},container:{paddingTop:e.spacing(20)}}})),ae=function(){var e=te(),t=Object(n.useContext)(m),a=t.providerValue.recordData,c=void 0===a?[]:a,o=t.providerValue.userData,i=void 0===o?{}:o;return r.a.createElement("div",{className:e.container},r.a.createElement("h2",null,"Historial de Canjes"),r.a.createElement(j.a,{container:!0,spacing:1},r.a.createElement(j.a,{container:!0,item:!0,xs:12,spacing:4},r.a.createElement(F,{isRedeemable:!1,products:c,userData:i}))))},ne=a(120),re=a(121),ce=Object(v.a)((function(e){return{root:{flexGrow:1},rootbar:{position:"fixed",width:"100%",zIndex:1e3},rootAlert:{width:"100%","& > * + *":{marginTop:e.spacing(2)}},menuButton:{marginRight:e.spacing(2)},toolbar:{minHeight:128,alignItems:"flex-start",paddingTop:e.spacing(1),paddingBottom:e.spacing(2),background:"linear-gradient(45deg, #8fb243 30%, #d36c1c 90%)",border:0,borderRadius:3,boxShadow:"0 3px 5px 2px rgba(255, 105, 135, .3)",color:"white",height:48,padding:"0 10px",zIndex:1e3},title:{flexGrow:1,alignSelf:"flex-end"},container:{paddingTop:e.spacing(20)},drawer:{width:240,flexShrink:0},drawerPaper:{width:240},drawerContainer:{overflow:"auto"},content:{flexGrow:1,padding:e.spacing(3)}}}));function oe(){var e=function(e){Array.from(document.getElementsByClassName("active")).map((function(e){return e.classList.remove("active"),e.classList.remove("show"),null})),document.getElementById(e.currentTarget.id).classList.add("active")},t=ce();return r.a.createElement(h,null,r.a.createElement("div",{className:"App"},r.a.createElement(i.a,null,r.a.createElement("div",{className:t.rootbar},r.a.createElement(ne.a,{position:"static"},r.a.createElement(re.a,{className:t.toolbar},r.a.createElement("img",{src:x.a,alt:"logo"}),r.a.createElement(G.a,{className:t.title,variant:"h5",noWrap:!0},r.a.createElement("header",null,r.a.createElement("nav",null,r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(i.b,{id:"lProduct",to:"/",onClick:function(t){return e(t)},className:"active"},"Productos")),r.a.createElement("li",null,r.a.createElement(i.b,{id:"lPerson",to:"/person",onClick:function(t){return e(t)}},"Persona")),r.a.createElement("li",null,r.a.createElement(i.b,{id:"lHistory",to:"/history",onClick:function(t){return e(t)}},"Historial")))))),r.a.createElement(G.a,{className:t.title,variant:"h5",noWrap:!0},r.a.createElement(U,null)," ")))),r.a.createElement(l.c,null," ",r.a.createElement(l.a,{path:"/",component:J,exact:!0})," ",r.a.createElement(l.a,{path:"/person",component:ee,exact:!0}),r.a.createElement(l.a,{path:"/history",component:ae,exact:!0})))))}o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(oe,null)),document.getElementById("root"))}},[[66,1,2]]]);
//# sourceMappingURL=main.c5ecabbd.chunk.js.map