(this["webpackJsonpjuanjosebernalvillamarin-rewards"]=this["webpackJsonpjuanjosebernalvillamarin-rewards"]||[]).push([[0],{64:function(e,t,a){},65:function(e,t,a){e.exports=a.p+"static/media/logo.cf518ba3.png"},81:function(e,t,a){e.exports=a(93)},86:function(e,t,a){},93:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(9),o=a.n(c),i=(a(64),a(86),a(48)),l=a(15),s=a(14),u=a.n(s),p=a(21),d=a(16),m=r.a.createContext(),g="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI1ZjRkMjYyMzc0MjM1MjAwMWVkOTA5OWMiLCJpYXQiOjE1OTg4OTE1NTV9.PQhZhUEYKTvxQnf2eF47t1cHiOaIbbX0_iM7O4N9i0w",f={"Content-Type":"application/json",Authorization:"Bearer "+g},b=new Headers;function v(e){var t=e.children,a=Object(n.useState)(""),c=Object(d.a)(a,2),o=c[0],i=c[1],l=Object(n.useState)(""),s=Object(d.a)(l,2),g=s[0],v=s[1],E=Object(n.useState)(""),h=Object(d.a)(E,2),j=h[0],x=h[1],O=function(){var e=Object(p.a)(u.a.mark((function e(t,a,n){var r,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t,{method:a,body:JSON.stringify(n),headers:b});case 2:return r=e.sent,e.next=5,r.json();case 5:return c=e.sent,e.abrupt("return",c);case 7:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){Object(p.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=i,e.next=3,O("https://coding-challenge-api.aerolab.co/products","GET");case 3:return e.t1=e.sent,(0,e.t0)(e.t1),e.t2=v,e.next=8,O("https://coding-challenge-api.aerolab.co/user/me","GET");case 8:return e.t3=e.sent,(0,e.t2)(e.t3),e.t4=x,e.next=13,O("https://coding-challenge-api.aerolab.co/user/history","GET");case 13:e.t5=e.sent,(0,e.t4)(e.t5);case 15:case"end":return e.stop()}}),e)})))()}),[]);var w=Object(n.useCallback)(Object(p.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Object(p.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=v,e.next=3,O("https://coding-challenge-api.aerolab.co/user/me","GET");case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)})))();case 1:case"end":return e.stop()}}),e)}))),[]),y=Object(n.useCallback)(Object(p.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Object(p.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=x,e.next=3,O("https://coding-challenge-api.aerolab.co/user/history","GET");case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)})))();case 1:case"end":return e.stop()}}),e)}))),[]),C=Object(n.useCallback)(function(){var e=Object(p.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O("https://coding-challenge-api.aerolab.co/user/points","POST",{amount:t});case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[]),k=Object(n.useCallback)(function(){var e=Object(p.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O("https://coding-challenge-api.aerolab.co/redeem","POST",{productId:t});case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[]),T=Object(n.useMemo)((function(){return{products:o,userData:g,recordData:j,setUserData:v,refrehUser:w,headers:f,addPoints:C,redeemProduct:k,updateHistory:y}}),[o,g,j,w,C,k,y]);return r.a.createElement(m.Provider,{value:{providerValue:T}},t)}b.append("Content-Type","application/json"),b.append("X-Custom-Header","ProcessThisImmediately"),b.append("Authorization","Bearer "+g);var E=a(126),h=a(65),j=a.n(h),x=a(138),O=a(66),w=a(151),y=a(129),C=a(152),k=a(131),T=a(132),N=a(133),P=a(134),S=a(135),I=a(136),R=a(154),M=a(147),A=a(155),D=a(139),G=a(140),V=a(141),B=a(142),H=a(61),z=a(143),F=a(148);var L=function(e,t){var a=Object(n.useState)(1),r=Object(d.a)(a,2),c=r[0],o=r[1],i=Math.ceil(e.length/t);return{next:function(){o((function(e){return Math.min(e+1,i)}))},prev:function(){o((function(e){return Math.max(e-1,1)}))},jump:function(e){var t=Math.max(1,e);o((function(e){return Math.min(t,i)}))},currentData:function(){var a=(c-1)*t,n=a+t;return e.slice(a,n)},currentPage:c,maxPage:i}},J=Object(E.a)((function(e){return{root:{flexGrow:1},rootbar:{position:"fixed",width:"100%",zIndex:1e3},rootAlert:{width:"100%","& > * + *":{marginTop:e.spacing(2)}},rootButton:{"& > *":{margin:e.spacing(1)}},menuButton:{marginRight:e.spacing(2)},toolbar:{minHeight:128,alignItems:"flex-start",paddingTop:e.spacing(1),paddingBottom:e.spacing(2),background:"linear-gradient(45deg, #8fb243 30%, #d36c1c 90%)",border:0,borderRadius:3,boxShadow:"0 3px 5px 2px rgba(255, 105, 135, .3)",color:"white",height:48,padding:"0 10px",zIndex:1e3},title:{flexGrow:1,alignSelf:"flex-end"},container:{paddingTop:e.spacing(10)},formControl:{margin:e.spacing(1),minWidth:120},selectEmpty:{marginTop:e.spacing(2)},paper:{padding:e.spacing(2),textAlign:"center",color:e.palette.text.secondary}}})),W=r.a.forwardRef((function(e,t){return r.a.createElement(y.a,Object.assign({direction:"up",ref:t},e))}));var U=function(e){var t=e.isRedeemable,a=e.products,c=e.userData,o=Object(n.useContext)(m).providerValue,i=o.redeemProduct,l=o.updateHistory,s=o.refrehUser,g=Object(n.useState)([]),f=Object(d.a)(g,2),b=f[0],v=f[1],E=Object(n.useState)([]),h=Object(d.a)(E,2),j=h[0],y=h[1],U=Object(n.useState)([]),Q=Object(d.a)(U,2),X=Q[0],Y=Q[1],Z=Object(n.useState)([]),_=Object(d.a)(Z,2),q=_[0],K=_[1],$=Object(n.useState)([]),ee=Object(d.a)($,2),te=ee[0],ae=ee[1];Object(n.useEffect)((function(){v(a);var e=new Set,t=new Set;a&&a.map((function(a){return e.add(a.category),t.add(a.cost),!0})),y(Array.from(e).sort()),K(Array.from(t).sort((function(e,t){return e-t})))}),[a]),Object(n.useEffect)((function(){var e=X?a&&a.filter((function(e){return e.category===X})):a;v(e),ae("")}),[X]),Object(n.useEffect)((function(){var e=te?a&&a.filter((function(e){return e.cost===te})):a;v(e),Y("")}),[te]);var ne=J(),re=Object(n.useState)(!1),ce=Object(d.a)(re,2),oe=ce[0],ie=ce[1],le=Object(n.useState)(""),se=Object(d.a)(le,2),ue=se[0],pe=se[1],de=Object(n.useState)(""),me=Object(d.a)(de,2),ge=me[0],fe=me[1],be=L(b,16),ve=Object(n.useState)(1),Ee=Object(d.a)(ve,2),he=Ee[0],je=Ee[1],xe=b.length>16?Math.ceil(b.length/16):1;function Oe(){return(Oe=Object(p.a)(u.a.mark((function e(t){var a,n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(O.a)(i(t));case 2:if(a=e.sent,n=Object(d.a)(a,2),r=n[0],n[1]){e.next=13;break}throw pe("Error"),fe("Producto No Pudo ser Redimido, Por Favor Intenta de Nuevo"),we(),new Error("Error al Redimir el Producto"+r);case 13:return e.next=15,l();case 15:return e.next=17,s();case 17:pe("Felicitaciones"),fe("Producto Redimido con \xc8xito \ud83d\udc5c"),we();case 20:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var we=function(){ie(!0)},ye=function(){ie(!1)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(C.a,{open:oe,onClose:ye,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",TransitionComponent:W,keepMounted:!0},r.a.createElement(k.a,{id:"alert-dialog-title"},ue),r.a.createElement(T.a,null,r.a.createElement(N.a,{id:"alert-dialog-description"},ge)),r.a.createElement(P.a,null,r.a.createElement(S.a,{onClick:ye,variant:"contained",color:"primary",autoFocus:!0},"Aceptar"))),r.a.createElement("div",{className:"box-center-2"},r.a.createElement(I.a,{variant:"filled",className:ne.formControl},r.a.createElement(R.a,{id:"demo-simple-select-outlined-label"},"Precio"),r.a.createElement(M.a,{labelId:"category-select-outlined-label",id:"demo-simple-select-outlined",value:te,onChange:function(e){ae(e.target.value)},label:"Categoria"},r.a.createElement(A.a,{value:"",key:Object(w.a)()},r.a.createElement("em",null,"Ninguno")),!!q&&q.map((function(e){return r.a.createElement(A.a,{value:e,key:Object(w.a)()},e)})))),r.a.createElement(I.a,{variant:"filled",className:ne.formControl},r.a.createElement(R.a,{id:"demo-simple-select-outlined-label"},"Categoria"),r.a.createElement(M.a,{labelId:"category-select-outlined-label",id:"demo-simple-select-outlined",value:X,onChange:function(e){Y(e.target.value)},label:"Categoria"},r.a.createElement(A.a,{value:"",key:Object(w.a)()},r.a.createElement("em",null,"Ninguno")),!!j&&j.map((function(e){return r.a.createElement(A.a,{value:e,key:Object(w.a)()},e)}))))),be.currentData()&&he&&be.currentData().map((function(e){return r.a.createElement(r.a.Fragment,{key:Object(w.a)()},r.a.createElement(x.a,{item:!0,xs:3},r.a.createElement(D.a,{className:ne.root,variant:"outlined"},r.a.createElement(G.a,null,r.a.createElement(V.a,{key:Object(w.a)(),component:"img",image:e.img.url,title:e.name}),r.a.createElement(B.a,null,r.a.createElement(H.a,{variant:"body2",color:"textSecondary",component:"p"},e.category),r.a.createElement(H.a,{gutterBottom:!0,variant:"h5",component:"h2"},e.name),r.a.createElement(H.a,{gutterBottom:!0,variant:"h6",component:"h6"},"$",e.cost))),t&&r.a.createElement(z.a,null,c.points>e.cost?r.a.createElement(S.a,{variant:"contained",color:"primary","aria-label":"Canjear",onClick:function(){return function(e){return Oe.apply(this,arguments)}(e._id)}},"Canjear"," ",r.a.createElement("span",{role:"img","aria-labelledby":"coin"},"\ud83d\udc5c")):r.a.createElement(S.a,{variant:"outlined",disabled:!0},"Te faltan ",c.points-e.cost," \ud83d\udcb0")))))})),r.a.createElement("div",{className:"box-center"},r.a.createElement(F.a,{count:xe,page:be.currentPage,onChange:function(e,t){je(t),be.jump(t)}})))},Q=Object(E.a)((function(e){return{root:{flexGrow:1},container:{paddingTop:e.spacing(12)}}})),X=function(){var e=Q(),t=Object(n.useContext)(m),a=t.providerValue.products,c=void 0===a?[]:a,o=t.providerValue.userData,i=void 0===o?{}:o;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:e.container},r.a.createElement("h2",null,"Productos Disponibles Para Canje"),r.a.createElement(x.a,{container:!0,spacing:1},r.a.createElement(x.a,{container:!0,item:!0,xs:12,spacing:4},r.a.createElement(U,{isRedeemable:!0,products:c,userData:i})))))};var Y=function(){var e=Object(n.useContext)(m).providerValue.userData,t=void 0===e?[]:e;return r.a.createElement("div",{className:"box-user"},r.a.createElement("strong",null," ",t.name)," :: ",t.points,"\ud83d\udcb0")},Z=a(72),_=a(156),q=a(153),K=a(149),$=a(144);function ee(e){return r.a.createElement(y.a,Object.assign({},e,{direction:"down"}))}var te=Object(E.a)((function(e){return{root:{flexGrow:1},rootPaper:{display:"flex",flexWrap:"wrap","& > *":{margin:e.spacing(1),width:e.spacing(16),height:e.spacing(16)}},rootAlert:{"& > * + *":{marginTop:e.spacing(2)},marginLeft:e.spacing(20),paddingLeft:e.spacing(5),marginRight:e.spacing(20),paddingRight:e.spacing(5)},title:{flexGrow:1,alignSelf:"flex-end"},container:{paddingTop:e.spacing(12)},paper:{marginTop:e.spacing(10),marginBottom:e.spacing(10),marginLeft:e.spacing(20),paddingLeft:e.spacing(5),marginRight:e.spacing(20),paddingRight:e.spacing(5),backgroundColor:"rgba(143, 178, 67, 0.7)"},close:{padding:e.spacing(.5)}}})),ae=[{value:1e3,label:"1000"},{value:5e3,label:"5000"},{value:7500,label:"7500"}];function ne(e){return"".concat(e)}var re=function(){var e=r.a.useState(!1),t=Object(d.a)(e,2),a=t[0],c=t[1],o=r.a.useState(""),i=Object(d.a)(o,2),l=i[0],s=i[1],g=r.a.useState(1e3),f=Object(d.a)(g,2),b=f[0],v=f[1],E=Object(n.useContext)(m).providerValue,h=E.addPoints,j=E.refrehUser,x=te(),O=function(){var e=Object(p.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={},e.prev=1,e.next=4,h(b);case 4:t=e.sent,e.next=9;break;case 7:e.prev=7,e.t0=e.catch(1);case 9:return s(t.message+", Nuevo Puntaje: "+t["New Points"]),c(!0),e.next=13,j();case 13:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(){return e.apply(this,arguments)}}(),w=function(){c(!1)};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:x.container},r.a.createElement("h2",null,"Agregar M\xe1s Puntos"),r.a.createElement("div",{className:x.root},r.a.createElement(K.a,{severity:"info",className:x.rootAlert},r.a.createElement($.a,null,"Recuerda: "),"Recuerda que solo puedes agregar 1000, 5000 o 7500 puntos :: Vas a agregar: ",r.a.createElement("strong",null,b," ")),r.a.createElement(Z.a,{elevation:3,className:x.paper},r.a.createElement(_.a,{defaultValue:1e3,onChange:function(e,t){v(t)},getAriaValueText:ne,"aria-labelledby":"discrete-slider-restrict",step:null,valueLabelDisplay:"on",marks:ae,min:0,max:7500})),r.a.createElement(S.a,{variant:"contained",color:"primary",onClick:function(){return O()}},"Agregar: ",r.a.createElement("strong",null," ",b," ")," \ud83d\udcb0"),r.a.createElement(q.a,{open:a,onClose:w,TransitionComponent:ee,message:l,action:r.a.createElement(r.a.Fragment,null,r.a.createElement(S.a,{color:"secondary",size:"small",onClick:w},"Cerrar"))}))))},ce=Object(E.a)((function(e){return{root:{flexGrow:1},container:{paddingTop:e.spacing(12)}}})),oe=function(){var e=ce(),t=Object(n.useContext)(m),a=t.providerValue.recordData,c=void 0===a?[]:a,o=t.providerValue.userData,i=void 0===o?{}:o;return r.a.createElement("div",{className:e.container},r.a.createElement("h2",null,"Historial de Canjes"),r.a.createElement(x.a,{container:!0,spacing:1},r.a.createElement(x.a,{container:!0,item:!0,xs:12,spacing:4},r.a.createElement(U,{isRedeemable:!1,products:c,userData:i}))))},ie=a(145),le=a(146),se=Object(E.a)((function(e){return{root:{flexGrow:1},rootbar:{position:"fixed",width:"100%",zIndex:1e3},rootAlert:{width:"100%","& > * + *":{marginTop:e.spacing(2)}},menuButton:{marginRight:e.spacing(2)},toolbar:{minHeight:88,alignItems:"flex-start",paddingTop:e.spacing(1),paddingBottom:e.spacing(2),background:"linear-gradient(45deg, #8fb243 30%, #d36c1c 90%)",border:0,borderRadius:3,boxShadow:"0 3px 5px 2px rgba(255, 105, 135, .3)",color:"white",height:48,padding:"0 10px",zIndex:1e3},title:{flexGrow:1,alignSelf:"flex-end"},container:{paddingTop:e.spacing(20)},drawer:{width:240,flexShrink:0},drawerPaper:{width:240},drawerContainer:{overflow:"auto"},content:{flexGrow:1,padding:e.spacing(3)}}}));function ue(){var e=function(e){Array.from(document.getElementsByClassName("active")).map((function(e){return e.classList.remove("active"),e.classList.remove("show"),null})),document.getElementById(e.currentTarget.id).classList.add("active")},t=se();return r.a.createElement(v,null,r.a.createElement("div",{className:"App"},r.a.createElement(i.a,null,r.a.createElement("div",{className:t.rootbar},r.a.createElement(ie.a,{position:"static"},r.a.createElement(le.a,{className:t.toolbar},r.a.createElement("img",{src:j.a,alt:"logo",className:"logo-d"}),r.a.createElement(H.a,{className:t.title,variant:"h5",noWrap:!0},r.a.createElement("header",null,r.a.createElement("nav",null,r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(i.b,{id:"lProduct",to:"/",onClick:function(t){return e(t)},className:"active"},"Productos")),r.a.createElement("li",null,r.a.createElement(i.b,{id:"lPerson",to:"/person",onClick:function(t){return e(t)}},"Persona")),r.a.createElement("li",null,r.a.createElement(i.b,{id:"lHistory",to:"/history",onClick:function(t){return e(t)}},"Historial")))))),r.a.createElement(H.a,{className:t.title,variant:"h5",noWrap:!0},r.a.createElement(Y,null)," ")))),r.a.createElement(l.c,null,r.a.createElement(l.a,{path:"/",component:X,exact:!0})," ",r.a.createElement(l.a,{path:"/person",component:re,exact:!0}),r.a.createElement(l.a,{path:"/history",component:oe,exact:!0})))))}o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(ue,null)),document.getElementById("root"))}},[[81,1,2]]]);
//# sourceMappingURL=main.e13314d4.chunk.js.map